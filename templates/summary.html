{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h2 class="mb-4">Your Tax Summary for 2023</h2>

  <div class="alert alert-info">
    <strong>Filing Status:</strong> {{ info.filing_status | capitalize }} <br>
    <strong>Full Name:</strong> {{ info.full_name }} <br>
    <strong>Address:</strong> {{ info.address }}, {{ info.city }}, {{ info.state }} - {{ info.zip_code }}
  </div>

  <div class="row">
    <div class="col-md-6">
      <h5>Income Summary</h5>
      <ul class="list-group mb-3">
        <li class="list-group-item">Wages: ${{ income.wages }}</li>
        <li class="list-group-item">Interest: ${{ income.interest }}</li>
        <li class="list-group-item">Dividends: ${{ income.dividends }}</li>
        <li class="list-group-item">Business Income: ${{ income.business_income }}</li>
        <li class="list-group-item">Other Income: ${{ income.other_income }}</li>
        <li class="list-group-item active bg-teal text-white">Total Income: ${{ result.total_income }}</li>
      </ul>
    </div>

    <div class="col-md-6">
      <h5>Deductions & Credits</h5>
      <ul class="list-group mb-3">
        <li class="list-group-item">Deduction Type: {{ deductions.deduction_type | capitalize }}</li>
        {% if deductions.deduction_type == 'itemized' %}
          <li class="list-group-item">Mortgage: ${{ deductions.itemized.mortgage }}</li>
          <li class="list-group-item">State Taxes: ${{ deductions.itemized.state_taxes }}</li>
          <li class="list-group-item">Charity: ${{ deductions.itemized.charity }}</li>
          <li class="list-group-item">Medical: ${{ deductions.itemized.medical }}</li>
        {% endif %}
        <li class="list-group-item">Dependents: {{ deductions.dependents }}</li>
        <li class="list-group-item active bg-teal text-white">Total Deductions: ${{ result.total_deductions }}</li>
      </ul>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-6">
      <h5>Tax Result</h5>

      {% if result.final_tax_owed > 0 %}
        <h4 class="text-danger">You owe: ${{ result.final_tax_owed }}</h4>
        <div class="card border-danger">
          <div class="card-body">
            <h4 class="card-title text-danger">You Owe: ${{ result.final_tax_owed }}</h4>
            <p class="card-text">Taxable Income: ${{ result.taxable_income }}</p>
            <p class="card-text">Effective Tax Rate: {{ result.effective_tax_rate }}%</p>
            <p class="card-text">Marginal Tax Rate: {{ result.marginal_tax_rate }}%</p>
          </div>
        </div>

      {% elif result.refund_amount > 0 %}
        <h4 class="text-success">üéâ Congratulations! You're getting a refund of ${{ result.refund_amount }}</h4>
        <div class="card border-success">
          <div class="card-body">
            <h4 class="card-title text-success">Refund: ${{ result.refund_amount }}</h4>
            <p class="card-text">Taxable Income: ${{ result.taxable_income }}</p>
            <p class="card-text">Effective Tax Rate: {{ result.effective_tax_rate }}%</p>
            <p class="card-text">Marginal Tax Rate: {{ result.marginal_tax_rate }}%</p>
          </div>
        </div>

      {% else %}
        <div class="alert alert-info">No taxes owed or refund available.</div>
      {% endif %}
    </div>
  </div>

  <div class="mt-4 d-flex justify-content-between">
    <a href="/" class="btn btn-outline-secondary">‚Üê Start Over</a>
    <a href="/download" class="btn btn-success">Download Tax Return PDF</a>
  </div>
</div>
{% endblock %}
